BootStrap: docker
From: scilus/scilus:1.3.0

%files
    /home/fdumais/Desktop/Acuity/tractolearn/scripts /tractolearn/scripts
    /home/fdumais/Desktop/Acuity/tractolearn/tractolearn /tractolearn/tractolearn
    /home/fdumais/Desktop/Acuity/tractolearn/requirements.txt /tractolearn/requirements.txt
    /home/fdumais/Desktop/Acuity/tractolearn/setup.cfg /tractolearn/setup.cfg
    /home/fdumais/Desktop/Acuity/tractolearn/setup_helpers.py /tractolearn/setup_helpers.py
    /home/fdumais/Desktop/Acuity/tractolearn/pyproject.toml /tractolearn/pyproject.toml
    /home/fdumais/Desktop/Acuity/tractolearn/setup.py /tractolearn/setup.py
    /home/fdumais/Desktop/Acuity/tractolearn/README.md /tractolearn/README.md
    
    /usr/share/fonts/truetype/freefont/FreeSans.ttf /usr/share/fonts/truetype/freefont/FreeSans.ttf

%post
    apt install -y jq

    pip3 install --upgrade pip

    pip3 install --upgrade vtk==9.1.*
    pip3 install --upgrade dmri-amico==1.2.*
    pip3 install --upgrade pyparsing==2.2.*
    pip3 install --upgrade cycler==0.10.*
    pip3 install --upgrade kiwisolver==1.0.*
    pip3 install --upgrade python-dateutil==2.7.*
    pip3 install --upgrade pytz==2018.4.*
    pip3 install --upgrade setuptools==46.1.*
    pip3 install --upgrade six==1.15.*

    cd tractolearn
    pip3 install -r requirements.txt
    pip3 install torch==1.8.1+cu111 torchvision==0.9.1+cu111 torchaudio==0.8.1 -f https://download.pytorch.org/whl/cu111/torch_stable.html
    pip3 install -e .

    chmod +x scripts/*